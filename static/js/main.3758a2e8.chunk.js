(this["webpackJsonpprojekat-react"]=this["webpackJsonpprojekat-react"]||[]).push([[0],{17:function(e,t,n){e.exports=n(29)},22:function(e,t,n){},23:function(e,t,n){},29:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n(15),r=n.n(c),u=(n(22),n(0)),o=n.n(u),s=(n(23),n(8)),i=n(2),l="https://coetus.herokuapp.com",p="/api/forum";function m(e){return fetch("".concat(l).concat(p).concat("/message","/").concat(e)).then((function(e){return e.json()}))}function f(){return fetch("".concat(l).concat(p).concat("/topics")).then((function(e){return e.json()}))}var j=Object(i.f)((function(e){var t=e.setUser,n=e.history,c=Object(u.useState)(""),r=Object(a.a)(c,2),s=r[0],i=r[1],m=Object(u.useState)(""),f=Object(a.a)(m,2),j=f[0],b=f[1];function h(){var e;(e={username:s,password:j},fetch("".concat(l).concat(p).concat("/users"),{headers:{"Content-Type":"application/json; charset=utf-8"},method:"POST",body:JSON.stringify(e)}).then((function(e){return e.json()}))).then((function(e){e.success?(t(e.user),n.push("/topics")):console.log("Nije ulogovan")}))}return o.a.createElement("form",null,o.a.createElement("input",{className:"inp",type:"username",placeholder:"Username",required:!0,onInput:function(e){i(e.target.value)}}),o.a.createElement("input",{className:"inp",type:"password",placeholder:"\u0160ifra",required:!0,onInput:function(e){b(e.target.value)}}),o.a.createElement("input",{className:"btn",type:"submit",value:"Uloguj se",onClick:function(e){e.preventDefault(),h()}}))})),b=function(){var e=Object(u.useState)([]),t=Object(a.a)(e,2),n=t[0],c=t[1];return Object(u.useEffect)((function(){f().then((function(e){c(e.topics)}))}),[]),o.a.createElement("div",{className:"topic"},n.map((function(e){return o.a.createElement("div",null,e.title.toString())})))},h=function(e){var t=e.setUser,n=e.history,c=Object(u.useState)(""),r=Object(a.a)(c,2),s=r[0],m=r[1],f=Object(u.useState)(""),h=Object(a.a)(f,2),d=h[0],E=h[1],O=Object(u.useState)(""),v=Object(a.a)(O,2),g=v[0],y=v[1],S=Object(u.useState)(""),N=Object(a.a)(S,2),I=N[0],k=N[1],U=Object(u.useState)(""),q=Object(a.a)(U,2),w=q[0],x=q[1],C=Object(u.useState)(""),D=Object(a.a)(C,2),J=D[0],P=D[1],T=Object(u.useState)(!1),_=Object(a.a)(T,2),F=_[0],z=_[1];function B(){var e;w&&F&&(e={name:s,surname:d,username:g,email:I,password:w},fetch("".concat(l).concat(p).concat("/users"),{headers:{"Content-Type":"application/json; charset=utf-8"},method:"PUT",body:JSON.stringify(e)}).then((function(e){return e.json()}))).then((function(e){e.success?(t(e.user),n.push("/topics")):console.log("Neuspe\u0161na registracija")}))}return Object(u.useEffect)((function(){z(J===w)}),[J,w]),o.a.createElement("div",{className:"main"},o.a.createElement("form",{id:"contact"},o.a.createElement("input",{className:"inp",type:"text",placeholder:"Ime",required:!0,onInput:function(e){m(e.target.value)}}),o.a.createElement("input",{className:"inp",type:"text",placeholder:"Prezime",required:!0,onInput:function(e){E(e.target.value)}}),o.a.createElement("input",{className:"inp",type:"text",placeholder:"Korisni\u010dko ime",required:!0,onInput:function(e){y(e.target.value)}}),o.a.createElement("input",{className:"inp",type:"email",placeholder:"Email",required:!0,onInput:function(e){k(e.target.value)}}),o.a.createElement("input",{className:"inp",type:"password",placeholder:"\u0160ifra",required:!0,onInput:function(e){x(e.target.value)}}),o.a.createElement("input",{className:"inp",type:"password",placeholder:"Potvrdi \u0161ifru",required:!0,onInput:function(e){P(e.target.value)}}),o.a.createElement("input",{className:"btn",type:"submit",value:"Registruj se",onClick:function(e){e.preventDefault(),B()}})),o.a.createElement(i.a,{path:"/",component:function(e){return o.a.createElement(j,Object.assign({setUser:t},e))}}),o.a.createElement(b,null))},d=function(e){var t=e.history,n=e.topicID,c=e.topic,r=Object(u.useState)(""),s=Object(a.a)(r,2),i=s[0],l=s[1];return console.log(i),Object(u.useEffect)((function(){m(n).then((function(e){e.success||l(e.messages.topic_id)}))}),[n]),o.a.createElement(o.a.Fragment,null,o.a.createElement("p",{onClick:function(){t.push("/topic/".concat(n))}},c))},E=function(e){var t=e.history,n=Object(u.useState)([]),c=Object(a.a)(n,2),r=c[0],s=c[1];return Object(u.useEffect)((function(){f().then((function(e){s(e.topics)}))}),[]),o.a.createElement("div",{className:"topic"},r.map((function(e){return o.a.createElement(d,{topic:e.title.toString(),topicID:e.topic_id,history:t})})))},O=function(e){var t=e.match,n=Object(u.useState)(t.params.topic_id),c=Object(a.a)(n,1)[0],r=Object(u.useState)([]),s=Object(a.a)(r,2),i=s[0],l=s[1];return Object(u.useEffect)((function(){m(c).then((function(e){l(e.messages)}))}),[c]),o.a.createElement("div",{className:"topic"},i.map((function(e){return o.a.createElement("p",null,e.message.toString())})))},v=function(e){var t=e.setUser,n=e.user;return o.a.createElement("div",null,o.a.createElement(i.c,null,o.a.createElement(i.a,{exact:!0,path:"/",component:function(e){return o.a.createElement(h,Object.assign({setUser:t},e))}}),o.a.createElement(i.a,{path:"/topics",component:E}),o.a.createElement(i.a,{path:"/topic/:topic_id",component:function(e){return o.a.createElement(O,Object.assign({setUser:t,user:n},e))}})))},g=function(){var e=Object(u.useState)(),t=Object(a.a)(e,2),n=t[0],c=t[1];return o.a.createElement(o.a.Fragment,null,o.a.createElement(s.a,{basename:"projekat-react"},o.a.createElement(v,{setUser:c,user:n})))};r.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(g,null)),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.3758a2e8.chunk.js.map